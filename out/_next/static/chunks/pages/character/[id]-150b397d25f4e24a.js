(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{262:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/character/[id]",function(){return a(3703)}])},3703:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return w},default:function(){return S}});var s=a(5893),o=a(9008),n=a.n(o),c=a(1163),i=a(7294),r=a(5770),l=a(5279),d=a(1917),h=a(9141),m=a(5012),p=a(6103),u=a(4094),x=a(1285),g=a(6634),j=a(9373),b=a(6875),k=a(2210),f=e=>{let{onCcfoliaExport:t}=e;return(0,s.jsx)("div",{className:"floating-action-buttons",children:(0,s.jsxs)("button",{onClick:t,className:"floating-btn ccfolia-btn",title:"ココフォリア用コマ出力",children:[(0,s.jsx)("i",{className:"fas fa-download"}),(0,s.jsx)("span",{className:"btn-text",children:"コマ出力"})]})})},y=e=>{let{isOpen:t,onClose:o,character:n,characterId:c}=e,[r,l]=(0,i.useState)(!1),[d,h]=(0,i.useState)({skillOutput:"all",rollCommand:"CCB",memoOptions:{blank:!1,name:!0,kana:!0,job:!0,sex:!0,age:!0,height:!0,skills:!1,items:!1,features:!1,jobSpecial:!1}});return((0,i.useEffect)(()=>{t||l(!1)},[t]),t)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"modal-overlay",onClick:o}),(0,s.jsx)("div",{className:"modal-container ccfolia-export-modal",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("h2",{className:"modal-title",children:[(0,s.jsx)("i",{className:"fas fa-download"})," ココフォリア用コマ出力"]}),(0,s.jsx)("p",{className:"modal-description",children:"コピーした内容をココフォリア上でペーストすると、探索者コマが作成されます。"}),(0,s.jsxs)("div",{className:"export-options",children:[(0,s.jsxs)("div",{className:"option-group",children:[(0,s.jsx)("h3",{children:"出力する技能"}),(0,s.jsxs)("div",{className:"radio-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"radio",name:"skillOutput",value:"all",checked:"all"===d.skillOutput,onChange:e=>h({...d,skillOutput:"all"})}),"全て"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"radio",name:"skillOutput",value:"nonDefault",checked:"nonDefault"===d.skillOutput,onChange:e=>h({...d,skillOutput:"nonDefault"})}),"初期値以外の技能のみ"]})]})]}),(0,s.jsxs)("div",{className:"option-group",children:[(0,s.jsx)("h3",{children:"ロールコマンド"}),(0,s.jsxs)("div",{className:"radio-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"radio",name:"rollCommand",value:"CCB",checked:"CCB"===d.rollCommand,onChange:e=>h({...d,rollCommand:"CCB"})}),"CCB"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"radio",name:"rollCommand",value:"CC",checked:"CC"===d.rollCommand,onChange:e=>h({...d,rollCommand:"CC"})}),"CC"]})]})]}),(0,s.jsxs)("div",{className:"option-group",children:[(0,s.jsx)("h3",{children:"キャラクターメモ"}),(0,s.jsxs)("div",{className:"checkbox-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.blank,onChange:e=>{e.target.checked?h({...d,memoOptions:{blank:!0,name:!1,kana:!1,job:!1,sex:!1,age:!1,height:!1,skills:!1,items:!1,features:!1,jobSpecial:!1}}):h({...d,memoOptions:{...d.memoOptions,blank:!1}})}}),"空白"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.name,onChange:e=>h({...d,memoOptions:{...d.memoOptions,name:e.target.checked,blank:!e.target.checked&&d.memoOptions.blank}})}),"名前"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.kana,onChange:e=>h({...d,memoOptions:{...d.memoOptions,kana:e.target.checked,blank:!e.target.checked&&d.memoOptions.blank}})}),"よみがな"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.job,onChange:e=>h({...d,memoOptions:{...d.memoOptions,job:e.target.checked,blank:!e.target.checked&&d.memoOptions.blank}})}),"職業"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.sex,onChange:e=>h({...d,memoOptions:{...d.memoOptions,sex:e.target.checked,blank:!e.target.checked&&d.memoOptions.blank}})}),"性別"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.age,onChange:e=>h({...d,memoOptions:{...d.memoOptions,age:e.target.checked,blank:!e.target.checked&&d.memoOptions.blank}})}),"年齢"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.height,onChange:e=>h({...d,memoOptions:{...d.memoOptions,height:e.target.checked,blank:!e.target.checked&&d.memoOptions.blank}})}),"身長"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.skills,onChange:e=>h({...d,memoOptions:{...d.memoOptions,skills:e.target.checked,blank:!e.target.checked&&d.memoOptions.blank}})}),"所持技能"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.items,onChange:e=>h({...d,memoOptions:{...d.memoOptions,items:e.target.checked,blank:!e.target.checked&&d.memoOptions.blank}})}),"所持品"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.features,onChange:e=>h({...d,memoOptions:{...d.memoOptions,features:e.target.checked,blank:!e.target.checked&&d.memoOptions.blank}})}),"特徴表"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:d.memoOptions.jobSpecial,onChange:e=>h({...d,memoOptions:{...d.memoOptions,jobSpecial:e.target.checked,blank:!e.target.checked&&d.memoOptions.blank}})}),"職業特記"]})]})]}),(0,s.jsxs)("div",{className:"memo-preview",children:[(0,s.jsx)("h4",{children:"キャラクターメモのプレビュー"}),(0,s.jsx)("pre",{children:(()=>{if(d.memoOptions.blank)return"";let e=[],t=[];d.memoOptions.name&&d.memoOptions.kana?t.push("".concat(n.character_name||"キャラクター","(").concat(n.character_name_kana||"",")")):d.memoOptions.name?t.push(n.character_name||"キャラクター"):d.memoOptions.kana&&t.push(n.character_name_kana||n.character_name||"キャラクター"),t.length>0&&e.push(t.join(""));let a=[];if(d.memoOptions.job&&a.push(n.job||"職業"),d.memoOptions.sex){let e=n.gender_custom||n.sex||n.gender||"性別";a.push(e)}if(d.memoOptions.age&&a.push(n.age||"年齢"),d.memoOptions.height&&a.push(n.height||"身長"),a.length>0&&e.push(a.join(" | ")),e.push("(PL:".concat(n.player_name||"プレイヤー",")")),d.memoOptions.skills){let t=[],a={dodge:"回避",grapple:"組み付き",throw:"投擲",handgun:"拳銃",submachine_gun:"サブマシンガン",shotgun:"ショットガン",machine_gun:"マシンガン",rifle:"ライフル",martial_arts:"マーシャルアーツ",kick:"キック",punch:"こぶし",headbutt:"頭突き",first_aid:"応急手当",locksmith:"鍵開け",hide:"隠す",sneak:"隠れる",listen:"聞き耳",photography:"写真術",psychoanalysis:"精神分析",track:"追跡",climb:"登攀",library_use:"図書館",spot_hidden:"目星",drive:"運転",mechanical_repair:"機械修理",heavy_machinery:"重機械操作",ride:"乗馬",swim:"水泳",craft:"制作",pilot:"操縦",jump:"跳躍",electrical_repair:"電気修理",navigate:"ナビゲート",disguise:"変装",fast_talk:"言いくるめ",credit_rating:"信用",persuade:"説得",bargain:"値切り",mother_tongue:"母国語",medicine:"医学",occult:"オカルト",chemistry:"化学",cthulhu_mythos:"クトゥルフ神話",art:"芸術",accounting:"経理",archaeology:"考古学",computer_use:"コンピューター",psychology:"心理学",anthropology:"人類学",biology:"生物学",geology:"地質学",electronics:"電子工学",astronomy:"天文学",natural_history:"博物学",physics:"物理学",law:"法律",pharmacy:"薬学",history:"歴史"};Object.entries({dodge:30,grapple:25,throw:25,handgun:20,submachine_gun:15,shotgun:30,machine_gun:15,rifle:25,martial_arts:1,kick:25,punch:50,headbutt:10,first_aid:30,locksmith:1,hide:15,sneak:10,listen:25,photography:10,psychoanalysis:1,track:10,climb:40,library_use:25,spot_hidden:25,drive:20,mechanical_repair:20,heavy_machinery:1,ride:5,swim:25,craft:5,pilot:1,jump:25,electrical_repair:10,navigate:10,disguise:1,fast_talk:5,credit_rating:15,persuade:15,bargain:5,mother_tongue:0,medicine:5,occult:5,chemistry:1,cthulhu_mythos:0,art:5,accounting:10,archaeology:1,computer_use:1,psychology:5,anthropology:1,biology:1,geology:1,electronics:1,astronomy:1,natural_history:10,physics:1,law:5,pharmacy:1,history:20}).forEach(e=>{let[s,o]=e,c=n["".concat(s,"_total")]||0;if(c>o){let e=a[s]||s;t.push("".concat(e,":").concat(c,"%"))}}),["combat","exploration","action","negotiation","knowledge"].forEach(e=>{for(let a=1;a<=50;a++){let s=n["additional_".concat(e,"_").concat(a,"_name")];if(s){let o=(parseInt(n["additional_".concat(e,"_").concat(a,"_initial")])||1)+(parseInt(n["additional_".concat(e,"_").concat(a,"_job")])||0)+(parseInt(n["additional_".concat(e,"_").concat(a,"_interest")])||0)+(parseInt(n["additional_".concat(e,"_").concat(a,"_growth")])||0)+(parseInt(n["additional_".concat(e,"_").concat(a,"_other")])||0);o>1&&t.push("".concat(s,":").concat(o,"%"))}}}),t.length>0&&e.push("\n【所持技能】\n"+t.join(" | "))}if(d.memoOptions.items){let t=[];for(let e=1;e<=50;e++){let a=n["item_".concat(e,"_name")],s=n["item_".concat(e,"_count")]||1;a&&t.push("".concat(a,"\xd7").concat(s))}t.length>0&&e.push("\n【所持品】\n"+t.join(", "))}if(d.memoOptions.features){let t=[];for(let e=1;e<=10;e++){let a=n["trait_".concat(e,"_name")],s=n["trait_".concat(e,"_description")],o=n["trait_".concat(e,"_number")];if(a&&""!==a.trim()){let e="";e=o?"<".concat(o,":").concat(a,">"):"<".concat(a,">"),s&&""!==s.trim()&&(e+="\n".concat(s)),t.push(e)}}t.length>0&&e.push("\n【特徴表】\n"+t.join("\n"))}if(d.memoOptions.jobSpecial){let t=n.job_special_notes||n.job_notes||n.job_special||n.occupation_notes||n.special_notes||n.job_memo||n.occupation_special;t&&e.push("\n【職業特記】\n"+t)}return e.join("\n")})()})]})]}),(0,s.jsxs)("div",{className:"modal-buttons",children:[(0,s.jsx)("button",{className:"modal-button cancel",onClick:o,children:"閉じる"}),r?(0,s.jsxs)("span",{style:{color:"#4caf50",fontWeight:"bold"},children:[(0,s.jsx)("i",{className:"fas fa-check"})," コピーしました"]}):(0,s.jsxs)("button",{className:"modal-button confirm",onClick:()=>{a.e(72).then(a.bind(a,1072)).then(e=>{let{generateCcfoliaCharacterData:t}=e,a=JSON.stringify(t(n,c,d));navigator.clipboard.writeText(a).then(()=>{l(!0),setTimeout(()=>{l(!1),o()},2e3)},()=>{let e=document.createElement("textarea");e.value=a,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),l(!0),setTimeout(()=>{l(!1),o()},2e3)})})},children:[(0,s.jsx)("i",{className:"fas fa-copy"})," コピー"]})]})]})})]}):null};function _(e){let{isOpen:t,onClose:a,onSuccess:o,characterName:n,expectedPassword:c}=e,[r,l]=(0,i.useState)(""),[d,h]=(0,i.useState)(""),[m,p]=(0,i.useState)(!1),u=async e=>{if(e.preventDefault(),!r.trim()){h("パスワードを入力してください");return}p(!0),h(""),setTimeout(()=>{p(!1),r===c?(o(),l(""),h("")):h("パスワードが正しくありません")},500)},x=()=>{l(""),h(""),a()};return t?(0,s.jsx)("div",{className:"password-modal-overlay",children:(0,s.jsxs)("div",{className:"password-modal",children:[(0,s.jsxs)("div",{className:"password-modal-header",children:[(0,s.jsxs)("h2",{children:[(0,s.jsx)("i",{className:"fas fa-lock"}),"パスワード保護されたページ"]}),(0,s.jsx)("button",{type:"button",className:"password-modal-close",onClick:x,children:(0,s.jsx)("i",{className:"fas fa-times"})})]}),(0,s.jsxs)("div",{className:"password-modal-body",children:[(0,s.jsxs)("p",{className:"password-modal-description",children:[(0,s.jsx)("i",{className:"fas fa-info-circle"}),"「",n||"このキャラクター","」の表示にはパスワードが必要です。"]}),(0,s.jsxs)("form",{onSubmit:u,className:"password-modal-form",children:[(0,s.jsxs)("div",{className:"password-input-wrapper",children:[(0,s.jsxs)("label",{htmlFor:"password-input",children:[(0,s.jsx)("i",{className:"fas fa-key"}),"パスワード"]}),(0,s.jsx)("input",{type:"password",id:"password-input",value:r,onChange:e=>l(e.target.value),placeholder:"パスワードを入力してください",className:"password-modal-input",autoFocus:!0,disabled:m})]}),d&&(0,s.jsxs)("div",{className:"password-modal-error",children:[(0,s.jsx)("i",{className:"fas fa-exclamation-triangle"}),d]}),(0,s.jsxs)("div",{className:"password-modal-actions",children:[(0,s.jsx)("button",{type:"button",onClick:x,className:"password-modal-cancel",disabled:m,children:"キャンセル"}),(0,s.jsx)("button",{type:"submit",className:"password-modal-submit",disabled:m||!r.trim(),children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-spinner fa-spin"}),"認証中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-unlock"}),"認証"]})})]})]})]})]})}):null}var w=!0;function S(e){let{character:t,characterId:a}=e,o=(0,c.useRouter)(),{user:w,loading:S}=(0,r.a)(),[v,C]=(0,i.useState)(!1),[O,N]=(0,i.useState)({}),[I,P]=(0,i.useState)({}),[E,R]=(0,i.useState)(null),[B,D]=(0,i.useState)(!1),[z,Z]=(0,i.useState)(!1),[U,M]=(0,i.useState)(!1),[T,L]=(0,i.useState)(!1),[q,F]=(0,i.useState)({hideIntroSecrets:!1,hideCharacterSheet:!1,hideCharacterDetails:!1,hideRecords:!1,hidePasswordProtected:!1}),J=w&&t&&t.userId===w.uid,A=async()=>{let e=new URLSearchParams;q.hideIntroSecrets&&e.append("hideIntroSecrets","true"),q.hideCharacterSheet&&e.append("hideSheet","true"),q.hideCharacterDetails&&e.append("hideDetails","true"),q.hideRecords&&e.append("hideRecords","true"),q.hidePasswordProtected&&e.append("hidePassword","true");let t=e.toString()?"".concat(window.location.href).concat(window.location.href.includes("?")?"&":"?").concat(e.toString()):window.location.href;try{await navigator.clipboard.writeText(t),L(!1),alert("URLをクリップボードにコピーしました")}catch(a){let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),L(!1),alert("URLをクリップボードにコピーしました")}},W=(e,t)=>{let a=e.replace("#",""),s=parseInt(a.substring(0,2),16),o=parseInt(a.substring(2,4),16),n=parseInt(a.substring(4,6),16),c=e=>Math.round(e).toString(16).padStart(2,"0");return"#".concat(c(Math.max(0,Math.min(255,s+s*t/100)))).concat(c(Math.max(0,Math.min(255,o+o*t/100)))).concat(c(Math.max(0,Math.min(255,n+n*t/100))))},G=(e,t)=>{let a=e.replace("#",""),s=parseInt(a.substring(0,2),16),o=parseInt(a.substring(2,4),16),n=parseInt(a.substring(4,6),16);return"rgba(".concat(s,", ").concat(o,", ").concat(n,", ").concat(t,")")},[V,X]=(0,i.useState)({weapons:!1,items:!1,disorders:!1,books:!1,spells:!1,artifacts:!1,entities:!1,memos:!1}),[H,K]=(0,i.useState)(!0),[Q,Y]=(0,i.useState)(!1),$=(e,t)=>{R((0,d.G)(e,t))},ee=e=>{X(t=>({...t,[e]:!t[e]}))};(0,i.useEffect)(()=>{let e="#74cdc3",a="#5fb5aa",s="rgba(116, 205, 195, 0.15)",o="rgba(116, 205, 195, 0.4)",n="rgba(116, 205, 195, 0.7)";if(null==t?void 0:t.ui_theme_color){let e=t.ui_theme_color,a=W(e,-20),s=G(e,.15),o=G(e,.4),n=G(e,.7);document.documentElement.style.setProperty("--ui-theme-color",e),document.documentElement.style.setProperty("--ui-theme-color-hover",a),document.documentElement.style.setProperty("--ui-theme-color-light",s),document.documentElement.style.setProperty("--ui-theme-color-medium",o),document.documentElement.style.setProperty("--ui-theme-color-dark",n)}else document.documentElement.style.setProperty("--ui-theme-color",e),document.documentElement.style.setProperty("--ui-theme-color-hover",a),document.documentElement.style.setProperty("--ui-theme-color-light",s),document.documentElement.style.setProperty("--ui-theme-color-medium",o),document.documentElement.style.setProperty("--ui-theme-color-dark",n);return()=>{document.documentElement.style.setProperty("--ui-theme-color",e),document.documentElement.style.setProperty("--ui-theme-color-hover",a),document.documentElement.style.setProperty("--ui-theme-color-light",s),document.documentElement.style.setProperty("--ui-theme-color-medium",o),document.documentElement.style.setProperty("--ui-theme-color-dark",n)}},[null==t?void 0:t.ui_theme_color]),(0,i.useEffect)(()=>{if((null==t?void 0:t.page_password_enabled)&&(null==t?void 0:t.page_password)){let e="auth-".concat(a);sessionStorage.getItem(e)?M(!0):Z(!0)}else M(!0)},[null==t?void 0:t.page_password_enabled,null==t?void 0:t.page_password,a]);let[et,ea]=(0,i.useState)(!1),[es,eo]=(0,i.useState)(!1),[en,ec]=(0,i.useState)(!1),[ei,er]=(0,i.useState)(!1),[el,ed]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{{let e=new URLSearchParams(window.location.search);ea("true"===e.get("hideIntroSecrets")),eo("true"===e.get("hideSheet")),ec("true"===e.get("hideDetails")),er("true"===e.get("hideRecords")),ed("true"===e.get("hidePassword"))}},[]),(0,i.useEffect)(()=>{if(C(!0),a){let e=localStorage.getItem("character-display-equipmentSections-".concat(a,"-v3")),t=localStorage.getItem("character-display-main-section-".concat(a)),s=localStorage.getItem("character-display-playsheet-".concat(a));if(null!==e){let t=JSON.parse(e);X({weapons:void 0!==t.weapons&&t.weapons,items:void 0!==t.items&&t.items,disorders:void 0!==t.disorders&&t.disorders,books:void 0!==t.books&&t.books,spells:void 0!==t.spells&&t.spells,artifacts:void 0!==t.artifacts&&t.artifacts,entities:void 0!==t.entities&&t.entities,memos:void 0!==t.memos&&t.memos})}null!==t&&K(JSON.parse(t)),null!==s&&Y(JSON.parse(s))}},[a]),(0,i.useEffect)(()=>{a&&v&&localStorage.setItem("character-display-equipmentSections-".concat(a,"-v3"),JSON.stringify(V))},[V,a,v]),(0,i.useEffect)(()=>{a&&localStorage.setItem("character-display-main-section-".concat(a),JSON.stringify(H))},[H,a]),(0,i.useEffect)(()=>{a&&localStorage.setItem("character-display-playsheet-".concat(a),JSON.stringify(Q))},[Q,a]),!t)return(0,s.jsxs)("div",{children:[(0,s.jsx)(n(),{children:(0,s.jsx)("title",{children:"キャラクターが見つかりません"})}),(0,s.jsx)("h1",{children:"キャラクターが見つかりません"}),(0,s.jsxs)("p",{children:["指定されたキャラクター（ID: ",a,"）は存在しません。"]})]});let eh="".concat(t.character_name||"キャラクター"," - CoC6版キャラクターシート"),em=()=>{D(!0)};return(null==t?void 0:t.page_password_enabled)&&(null==t?void 0:t.page_password)&&!U?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:eh}),(0,s.jsx)("meta",{name:"description",content:"".concat(t.character_name,"のキャラクターシート")}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,s.jsx)(b.Z,{showBackButton:!0,customBackUrl:"/"}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh",textAlign:"center",padding:"20px"},children:(0,s.jsxs)("div",{children:[(0,s.jsx)("i",{className:"fas fa-lock",style:{fontSize:"3rem",color:"#ccc",marginBottom:"20px"}}),(0,s.jsx)("h2",{style:{color:"#666",marginBottom:"10px"},children:"パスワード保護されたページ"}),(0,s.jsx)("p",{style:{color:"#888"},children:"このページを表示するには認証が必要です。"})]})}),(0,s.jsx)(_,{isOpen:z,onClose:()=>{Z(!1),o.push("/list")},onSuccess:()=>{let e="auth-".concat(a);sessionStorage.setItem(e,"true"),M(!0),Z(!1)},characterName:t.character_name,expectedPassword:t.page_password})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:eh}),(0,s.jsx)("meta",{name:"description",content:"".concat(t.character_name,"のキャラクターシート")}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,s.jsx)(b.Z,{showBackButton:!0,customBackUrl:"/list",showEditButton:J,editUrl:"/create?edit=".concat(a),showShareButton:!0,onShare:()=>{L(!0)}}),(0,s.jsx)(f,{onCcfoliaExport:em}),(0,s.jsx)("div",{className:"works-template-default single single-works postid-6531 custom-background",children:(0,s.jsx)("div",{id:"content",className:"chara-coc character page-with-header ".concat((null==t?void 0:t.is_lost)?"is-lost":""),children:(0,s.jsx)("div",{id:"inner-content",className:"wrap cf",children:(0,s.jsx)("main",{id:"main",role:"main",itemScope:!0,itemProp:"mainContentOfPage",itemType:"http://schema.org/Blog",children:(0,s.jsxs)("article",{id:"post-6531",className:"cf post-6531 works type-works status-publish has-post-thumbnail hentry custom_cat-character custom_cat-chara-coc custom_tag-1072",role:"article",children:[(0,s.jsx)(g.Z,{character:t,hideSecrets:et}),!es&&(0,s.jsx)("section",{className:"chara-seet character-display",children:(0,s.jsxs)("div",{className:"data-wrap",style:{margin:"10px 0"},children:[(0,s.jsxs)("div",{className:"playsheet-header ".concat(Q?"":"active"),onClick:()=>Y(!Q),children:[(0,s.jsxs)("h2",{children:[(0,s.jsx)("i",{className:"fas fa-scroll section-icon"})," Character Sheet"]}),(0,s.jsx)("i",{className:"fas ".concat(Q?"fa-chevron-right":"fa-chevron-down"),style:{marginRight:"5px"}})]}),!Q&&(0,s.jsxs)("div",{className:"equipment-content",children:[(0,s.jsx)(h.Z,{character:t,calculateAbilityTotal:()=>["str_total","con_total","pow_total","dex_total","app_total","siz_total","int_total","edu_total"].reduce((e,a)=>{let s=t[a];return e+(s&&!isNaN(s)?parseInt(s):0)},0)}),(0,s.jsxs)("div",{className:"character-info character-name-section",children:[(0,s.jsx)(p.Z,{character:t}),(0,s.jsx)(x.Z,{character:t,characterId:a,handleSkillClick:$,onCcfoliaExport:em}),(0,s.jsx)(m.Z,{character:t,equipmentSections:V,toggleEquipmentSection:ee,handleSkillClick:$}),(0,s.jsx)(u.Z,{character:t,equipmentSections:V,toggleEquipmentSection:ee,secretMemoVisibility:O,memoPasswordStates:I,toggleSecretMemoVisibility:e=>{N(t=>({...t,[e]:!t[e]}))},handlePasswordInput:(e,t)=>{P(a=>({...a,[e]:{...a[e],inputPassword:t}}))},handlePasswordSubmit:e=>{var a;let s=t["".concat(e,"_password")];((null===(a=I[e])||void 0===a?void 0:a.inputPassword)||"")===s?P(t=>({...t,[e]:{...t[e],unlocked:!0}})):alert("パスワードが正しくありません")},hideSecrets:et||el})]})]})]})}),!en&&(0,s.jsx)(j.Z,{characterData:t,hideSecrets:et||el}),!ei&&(0,s.jsx)(j.x,{characterData:t,hideSecrets:et||el})]})})})})}),(0,s.jsx)(l.Z,{result:E,onClose:()=>R(null)}),(0,s.jsx)(y,{isOpen:B,onClose:()=>D(!1),character:t,characterId:a}),T&&(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,s.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[(0,s.jsxs)("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",color:"#333",textAlign:"center"},children:[(0,s.jsx)("i",{className:"fas fa-share-alt",style:{marginRight:"8px"}}),"キャラクターシートを共有"]}),(0,s.jsx)("p",{style:{margin:"0 0 16px 0",fontSize:"14px",color:"#666",textAlign:"center"},children:"URLをコピーして共有できます"}),(0,s.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#f0f0f0",borderRadius:"4px"},children:[(0,s.jsx)("p",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"非表示にする項目を選択："}),(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"8px",fontSize:"14px",cursor:"pointer"},children:[(0,s.jsx)("input",{type:"checkbox",checked:q.hideIntroSecrets,onChange:e=>F(t=>({...t,hideIntroSecrets:e.target.checked})),style:{marginRight:"8px"}}),"キャラクター紹介 - 秘匿情報"]}),(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"8px",fontSize:"14px",cursor:"pointer"},children:[(0,s.jsx)("input",{type:"checkbox",checked:q.hideCharacterSheet,onChange:e=>F(t=>({...t,hideCharacterSheet:e.target.checked})),style:{marginRight:"8px"}}),"キャラクターシート"]}),(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"8px",fontSize:"14px",cursor:"pointer"},children:[(0,s.jsx)("input",{type:"checkbox",checked:q.hideCharacterDetails,onChange:e=>F(t=>({...t,hideCharacterDetails:e.target.checked})),style:{marginRight:"8px"}}),"キャラクター詳細"]}),(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"8px",fontSize:"14px",cursor:"pointer"},children:[(0,s.jsx)("input",{type:"checkbox",checked:q.hideRecords,onChange:e=>F(t=>({...t,hideRecords:e.target.checked})),style:{marginRight:"8px"}}),"記録"]}),(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",fontSize:"14px",cursor:"pointer"},children:[(0,s.jsx)("input",{type:"checkbox",checked:q.hidePasswordProtected,onChange:e=>F(t=>({...t,hidePasswordProtected:e.target.checked})),style:{marginRight:"8px"}}),"パスワード付きの情報"]})]}),(0,s.jsx)("div",{style:{border:"1px solid #ddd",borderRadius:"4px",padding:"8px 12px",backgroundColor:"#f9f9f9",fontSize:"14px",wordBreak:"break-all",marginBottom:"16px"},children:(()=>{let e=new URLSearchParams;return q.hideIntroSecrets&&e.append("hideIntroSecrets","true"),q.hideCharacterSheet&&e.append("hideSheet","true"),q.hideCharacterDetails&&e.append("hideDetails","true"),q.hideRecords&&e.append("hideRecords","true"),q.hidePasswordProtected&&e.append("hidePassword","true"),e.toString()?"".concat(window.location.href).concat(window.location.href.includes("?")?"&":"?").concat(e.toString()):window.location.href})()}),(0,s.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,s.jsx)("button",{onClick:()=>L(!1),style:{flex:1,padding:"10px",backgroundColor:"#f0f0f0",color:"#666",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"閉じる"}),(0,s.jsxs)("button",{onClick:A,style:{flex:1,padding:"10px",backgroundColor:(null==t?void 0:t.ui_theme_color)||"#74cdc3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:[(0,s.jsx)("i",{className:"fas fa-copy",style:{marginRight:"6px"}}),"URLをコピー"]})]})]})}),(0,s.jsx)(k.Z,{})]})}}},function(e){e.O(0,[930,534,125,888,774,179],function(){return e(e.s=262)}),_N_E=e.O()}]);