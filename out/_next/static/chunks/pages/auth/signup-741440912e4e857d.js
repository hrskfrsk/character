(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[613],{2120:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/signup",function(){return s(31)}])},31:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return m}});var r=s(5893),t=s(645),d=s.n(t),o=s(7294),i=s(1163),n=s(9008),c=s.n(n),l=s(1664),x=s.n(l),f=s(5770),b=s(6875),p=s(2210);function m(){let e=(0,i.useRouter)(),{user:a,loading:s,signUpWithEmail:t,signInWithGoogle:n}=(0,f.a)(),[l,m]=(0,o.useState)(""),[u,h]=(0,o.useState)(""),[g,j]=(0,o.useState)(""),[w,k]=(0,o.useState)(""),[y,v]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!s&&a){let a=e.query.redirect||"/";e.push(a)}},[a,s,e]);let N=async a=>{if(a.preventDefault(),k(""),u!==g){k("パスワードが一致しません");return}if(u.length<6){k("パスワードは6文字以上で入力してください");return}v(!0);try{await t(l,u);let a=e.query.redirect||"/";e.push(a)}catch(e){"auth/email-already-in-use"===e.code?k("このメールアドレスは既に使用されています"):"auth/invalid-email"===e.code?k("メールアドレスの形式が正しくありません"):"auth/weak-password"===e.code?k("パスワードが弱すぎます"):k("アカウント作成に失敗しました")}finally{v(!1)}},z=async()=>{k(""),v(!0);try{await n();let a=e.query.redirect||"/";e.push(a)}catch(e){"auth/popup-closed-by-user"===e.code?k("サインアップがキャンセルされました"):k("Googleサインアップに失敗しました")}finally{v(!1)}};return s?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{className:"jsx-f3d922e3e9c8ebfd",children:"アカウント作成 - クトゥルフ神話TRPG第6版 キャラクターシート"})}),(0,r.jsx)(b.Z,{showCreateButton:!1}),(0,r.jsx)("main",{className:"jsx-f3d922e3e9c8ebfd container page-with-header auth-page",children:(0,r.jsxs)("div",{className:"jsx-f3d922e3e9c8ebfd auth-container",children:[(0,r.jsx)("h1",{className:"jsx-f3d922e3e9c8ebfd",children:"アカウント作成"}),w&&(0,r.jsxs)("div",{className:"jsx-f3d922e3e9c8ebfd error-message",children:[(0,r.jsx)("i",{className:"jsx-f3d922e3e9c8ebfd fas fa-exclamation-circle"}),w]}),(0,r.jsxs)("form",{onSubmit:N,className:"jsx-f3d922e3e9c8ebfd auth-form",children:[(0,r.jsxs)("div",{className:"jsx-f3d922e3e9c8ebfd form-group",children:[(0,r.jsx)("label",{htmlFor:"email",className:"jsx-f3d922e3e9c8ebfd",children:"メールアドレス"}),(0,r.jsx)("input",{id:"email",type:"email",value:l,onChange:e=>m(e.target.value),required:!0,placeholder:"example@email.com",className:"jsx-f3d922e3e9c8ebfd form-input"})]}),(0,r.jsxs)("div",{className:"jsx-f3d922e3e9c8ebfd form-group",children:[(0,r.jsx)("label",{htmlFor:"password",className:"jsx-f3d922e3e9c8ebfd",children:"パスワード"}),(0,r.jsx)("input",{id:"password",type:"password",value:u,onChange:e=>h(e.target.value),required:!0,placeholder:"6文字以上のパスワード",className:"jsx-f3d922e3e9c8ebfd form-input"})]}),(0,r.jsxs)("div",{className:"jsx-f3d922e3e9c8ebfd form-group",children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"jsx-f3d922e3e9c8ebfd",children:"パスワード（確認）"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",value:g,onChange:e=>j(e.target.value),required:!0,placeholder:"パスワードを再入力",className:"jsx-f3d922e3e9c8ebfd form-input"})]}),(0,r.jsx)("div",{className:"jsx-f3d922e3e9c8ebfd form-actions",children:(0,r.jsx)("button",{type:"submit",disabled:y,className:"jsx-f3d922e3e9c8ebfd btn btn-primary",children:y?"アカウント作成中...":"アカウントを作成"})})]}),(0,r.jsx)("div",{className:"jsx-f3d922e3e9c8ebfd auth-divider",children:(0,r.jsx)("span",{className:"jsx-f3d922e3e9c8ebfd",children:"または"})}),(0,r.jsxs)("button",{onClick:z,disabled:y,className:"jsx-f3d922e3e9c8ebfd btn btn-google",children:[(0,r.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"jsx-f3d922e3e9c8ebfd",children:[(0,r.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",className:"jsx-f3d922e3e9c8ebfd"}),(0,r.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",className:"jsx-f3d922e3e9c8ebfd"}),(0,r.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",className:"jsx-f3d922e3e9c8ebfd"}),(0,r.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",className:"jsx-f3d922e3e9c8ebfd"})]}),"Googleでアカウント作成"]}),(0,r.jsx)("div",{className:"jsx-f3d922e3e9c8ebfd auth-links",children:(0,r.jsx)(x(),{href:"/auth/login",children:"既にアカウントをお持ちの方はこちら"})})]})}),(0,r.jsx)(p.Z,{}),(0,r.jsx)(d(),{id:"f3d922e3e9c8ebfd",children:'.auth-page.jsx-f3d922e3e9c8ebfd{background:-webkit-linear-gradient(top,#74cdc3 35%,transparent);background:-moz-linear-gradient(top,#74cdc3 35%,transparent);background:-o-linear-gradient(top,#74cdc3 35%,transparent);background:linear-gradient(180deg,#74cdc3 35%,transparent);min-height:90vh;padding-top:3%}.auth-container.jsx-f3d922e3e9c8ebfd{max-width:400px;margin:40px auto;padding:30px;background:white;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 10px rgba(0,0,0,.1);-moz-box-shadow:0 2px 10px rgba(0,0,0,.1);box-shadow:0 2px 10px rgba(0,0,0,.1)}h1.jsx-f3d922e3e9c8ebfd{text-align:center;margin-bottom:30px;color:#333;font-size:24px}.error-message.jsx-f3d922e3e9c8ebfd{background:#fee;color:#c33;padding:12px 16px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;margin-bottom:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;font-size:14px}.auth-form.jsx-f3d922e3e9c8ebfd{margin-bottom:20px}.form-group.jsx-f3d922e3e9c8ebfd{margin-bottom:20px}.form-group.jsx-f3d922e3e9c8ebfd label.jsx-f3d922e3e9c8ebfd{display:block;margin-bottom:6px;color:#495057;font-size:14px;font-weight:500}.form-input.jsx-f3d922e3e9c8ebfd{width:100%;padding:10px 12px;border:1px solid#ddd;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:14px;-webkit-transition:border-color.3s ease;-moz-transition:border-color.3s ease;-o-transition:border-color.3s ease;transition:border-color.3s ease}.form-input.jsx-f3d922e3e9c8ebfd:focus{outline:none;border-color:var(--ui-theme-color);-webkit-box-shadow:0 0 0 2px var(--ui-theme-color-light);-moz-box-shadow:0 0 0 2px var(--ui-theme-color-light);box-shadow:0 0 0 2px var(--ui-theme-color-light)}.form-actions.jsx-f3d922e3e9c8ebfd{margin-top:24px}.btn.jsx-f3d922e3e9c8ebfd{width:100%;padding:12px 20px;border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:8px}.btn.jsx-f3d922e3e9c8ebfd:disabled{opacity:.6;cursor:not-allowed}.btn-primary.jsx-f3d922e3e9c8ebfd{background:var(--ui-theme-color);color:white}.btn-primary.jsx-f3d922e3e9c8ebfd:hover:not(:disabled){background:var(--ui-theme-color-hover);-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px);-webkit-box-shadow:0 4px 12px rgba(0,0,0,.15);-moz-box-shadow:0 4px 12px rgba(0,0,0,.15);box-shadow:0 4px 12px rgba(0,0,0,.15)}.btn-google.jsx-f3d922e3e9c8ebfd{background:white;color:#333;border:1px solid#ddd}.btn-google.jsx-f3d922e3e9c8ebfd:hover:not(:disabled){background:#f8f9fa;border-color:#ccc;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px);-webkit-box-shadow:0 2px 8px rgba(0,0,0,.1);-moz-box-shadow:0 2px 8px rgba(0,0,0,.1);box-shadow:0 2px 8px rgba(0,0,0,.1)}.auth-divider.jsx-f3d922e3e9c8ebfd{text-align:center;margin:24px 0;position:relative}.auth-divider.jsx-f3d922e3e9c8ebfd span.jsx-f3d922e3e9c8ebfd{background:white;padding:0 16px;color:#6c757d;font-size:14px;position:relative}.auth-divider.jsx-f3d922e3e9c8ebfd::before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e9ecef;z-index:-1}.auth-links.jsx-f3d922e3e9c8ebfd{margin-top:24px;text-align:center}@media(max-width:768px){.auth-container.jsx-f3d922e3e9c8ebfd{margin:20px;padding:24px}h1.jsx-f3d922e3e9c8ebfd{font-size:20px}}'})]})}}},function(e){e.O(0,[930,534,888,774,179],function(){return e(e.s=2120)}),_N_E=e.O()}]);