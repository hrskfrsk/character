"use strict";(()=>{var e={};e.id=382,e.ids=[382],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,r)=>{Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},3448:(e,r,t)=>{t.r(r),t.d(r,{config:()=>g,default:()=>A,routeModule:()=>p});var n={};t.r(n),t.d(n,{default:()=>f});var a=t(1802),i=t(7153),o=t(6249);let c=require("firebase-admin/app"),s=require("firebase-admin/firestore"),l=null;!function(){try{if(!(0,c.getApps)().length){let e="-----BEGIN PRIVATE KEY-----\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDW4B7UQap7LamG\nSHRODkRUvpfFki/WyfufzTeaWePVhoPFpBKvyV/oHu4l6GDinbGfsIIcLAw09c0A\njsC/Zd/MJikwZz1zDdH6fs+ax2xpz2mA3biwxKx79l7d9k4fLLW5kfrjI1J/auFU\nPQYcvmwGLk/iAayRaJfesphyMauRGn2QC9yHpiVaxFVHW6mq6Wed1RdFYGmZvyoa\nkx5M/YOVIMwfulx+8z4ApIzisPK4RtjtjQR6M8Ntwl+hyyvruKUZb+jPnkCozKGV\ndfSPTjMpJfA8oZdRhKbiIDpS+aiWVKjEmCBgSdEwV06VFsFyKmpU7kDvZFpGoMEF\nvixYPCBZAgMBAAECggEAAUR3czrH7cvKTHwwWks6rasA/i2iSOQOZehWjQ2rQYN2\nd4TWPRhZj53PFvK5YdzRZ7AE2QZDxnQybjj7oFxAC7GoN2W7W1hhPPuXpnik8+v3\n2esHLUqbsdnHm8Jr4vl5ZYKJf3TrT17Pc7t3RgyzyCIfg6V64a1DaBEpnsCIQIqQ\naEd22UAQkwg8TIufKfy705BUDXV/3gVQ/n5CcGyahXTF86peNMCHxKCaQ19YhybW\neTHFJErybqhta0roYOSxfeGWIZipxFaEO4LG0RGo4hbPLDyEu0J/X1uRCmtUvJKh\n++GP9xkvFD0IzAXXrrV9bUcvJXvFNtPtb8PgvEpL4QKBgQDva2X8hnP/OEu0Ti5i\n2mMcbw5UG3aaqhFeq3fuYAY+X7M31kil1pv02UzTbvbi3E7lhWZRp4cQg+TDRyBX\no2WT3PNj7OtgU5giDLz9UCZ5CUMuhQoRn4w9dfMsCKxlwZlA6VWjUQtKmAIOBUTv\nmFe0aVESldPd3iuLL0/KJ635BQKBgQDlwZZerhiIXVi3iinfw+pRzBiQySVJrBqs\nuBFMa/3ViSWxg1HSfIY+W+L104lP3GN7DGmlKIRLrYGapcGQHBi5oWCydWCdEXg8\nWMCBqSzeDSslHceyftOqOlwYI3T8gkasY2mRPuu5TqfRjYEIi6j+or4C9Q4JilO8\nAFJtbk+aRQKBgQCkutx9F3WQUQelk3VPBrvSwIa3T/4XBJTW8lueY+tn1yjUblel\n4zeDDFBT2bF8/eA7A8IWxJGlx1oLElEqe35Ucl30jvqUWHAAXYtbL16JQNo8k8UN\nwx0W3KTn0z/q832ir+kAaa6/MD+Zrf50a/lMZHons3cG3OpQ5cicaxjEkQKBgQCS\nPR/q78EputCnMkfo55iTq+bO8VjMhcEMwrQwAmS0r/DQBhfkc+I2euIBOj2iGVMw\nlPwBZcKfMLbXqj2D7n5GWVNlA5UVJHN1ZcBSR04JoDQgEc5z7InpRfAsZRUnS/yT\n6UreakA72La0iO7ic5KDUS7ETxo6NFOLzGCqypXcSQKBgQDIj34Fw9Mp5glx/uIb\nIr+TUO2GgBSaFUR2pN7SzN73ivWnb7tcXth7wAOoy61Pq6LRdqFFKowtqCuN8uCg\n+L8DwCz5ofLJu8uCEL/cmec57T8A/dS744hVxRXRgzsa2ury9s2JapHopjSdJr83\nkwbUswcywPgXXh3BfbNtnVsoRw==\n-----END PRIVATE KEY-----\n".replace(/\\n/g,"\n");if(!e)return console.warn("Firebase Admin environment variables are missing - running in offline mode"),!1;(0,c.initializeApp)({credential:(0,c.cert)({projectId:"hatake-ffb62",clientEmail:"firebase-adminsdk-fbsvc@hatake-ffb62.iam.gserviceaccount.com",privateKey:e}),projectId:"hatake-ffb62"}),console.log("Firebase Admin initialized successfully")}l=(0,s.getFirestore)()}catch(e){return console.error("Firebase Admin initialization error:",e),!1}}();let u=l,d=require("firebase-admin/storage");async function f(e,r){if("DELETE"!==e.method)return r.status(405).json({error:"Method not allowed"});let{id:t}=e.query;if(!t||"string"!=typeof t)return r.status(400).json({error:"Invalid character ID"});try{if(!u)return console.error("Firebase Admin DB is not initialized"),r.status(500).json({error:"Database connection error"});let e=await u.collection("characters").doc(t).get();if(!e.exists)return r.status(404).json({error:"Character not found"});let n=e.data();if(n?.character_image_url)try{let e=n.character_image_url.match(/o\/(.+?)\?/);if(e){let r=decodeURIComponent(e[1]),t=(0,d.getStorage)().bucket().file(r),[n]=await t.exists();n&&(await t.delete(),console.log("Deleted image:",r))}}catch(e){console.error("Failed to delete image:",e)}await u.collection("characters").doc(t).delete(),r.status(200).json({success:!0,message:"Character deleted successfully"})}catch(e){console.error("Error deleting character:",e),r.status(500).json({error:"Failed to delete character"})}}let A=(0,o.l)(n,"default"),g=(0,o.l)(n,"config"),p=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/characters/[id]/delete",pathname:"/api/characters/[id]/delete",bundlePath:"",filename:""},userland:n})},7153:(e,r)=>{var t;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1802:(e,r,t)=>{e.exports=t(145)}};var r=require("../../../../webpack-api-runtime.js");r.C(e);var t=r(r.s=3448);module.exports=t})();