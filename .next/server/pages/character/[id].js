"use strict";(()=>{var e={};e.id=569,e.ids=[569],e.modules={4011:(e,t,a)=>{a.r(t),a.d(t,{config:()=>$,default:()=>A,getServerSideProps:()=>F,getStaticPaths:()=>E,getStaticProps:()=>D,reportWebVitals:()=>z,routeModule:()=>Z,unstable_getServerProps:()=>T,unstable_getServerSideProps:()=>W,unstable_getStaticParams:()=>U,unstable_getStaticPaths:()=>Q,unstable_getStaticProps:()=>q});var s={};a.r(s),a.d(s,{default:()=>I,getStaticPaths:()=>R,getStaticProps:()=>B});var i=a(7093),n=a(5244),r=a(1323),o=a(7645),c=a(6814),l=a(997),d=a(968),h=a.n(d),p=a(1163),m=a(6689),u=a(2149),x=a(9314),g=a(7703),b=a(1369),f=a(7054),j=a(2036),k=a(8079),y=a(6187),S=a(300),w=a(3578),C=a(852),_=a(7822),v=a(5696);let O=({onCcfoliaExport:e})=>l.jsx("div",{className:"floating-action-buttons",children:(0,l.jsxs)("button",{onClick:e,className:"floating-btn ccfolia-btn",title:"ココフォリア用コマ出力",children:[l.jsx("i",{className:"fas fa-download"}),l.jsx("span",{className:"btn-text",children:"コマ出力"})]})}),N=({isOpen:e,onClose:t,character:s,characterId:i})=>{let[n,r]=(0,m.useState)(!1),[o,c]=(0,m.useState)({skillOutput:"all",rollCommand:"CCB",memoOptions:{blank:!1,name:!0,kana:!0,job:!0,sex:!0,age:!0,height:!0,skills:!1,items:!1,features:!1,jobSpecial:!1}});return((0,m.useEffect)(()=>{e||r(!1)},[e]),e)?(0,l.jsxs)(l.Fragment,{children:[l.jsx("div",{className:"modal-overlay",onClick:t}),l.jsx("div",{className:"modal-container ccfolia-export-modal",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("h2",{className:"modal-title",children:[l.jsx("i",{className:"fas fa-download"})," ココフォリア用コマ出力"]}),l.jsx("p",{className:"modal-description",children:"コピーした内容をココフォリア上でペーストすると、探索者コマが作成されます。"}),(0,l.jsxs)("div",{className:"export-options",children:[(0,l.jsxs)("div",{className:"option-group",children:[l.jsx("h3",{children:"出力する技能"}),(0,l.jsxs)("div",{className:"radio-group",children:[(0,l.jsxs)("label",{children:[l.jsx("input",{type:"radio",name:"skillOutput",value:"all",checked:"all"===o.skillOutput,onChange:e=>c({...o,skillOutput:"all"})}),"全て"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"radio",name:"skillOutput",value:"nonDefault",checked:"nonDefault"===o.skillOutput,onChange:e=>c({...o,skillOutput:"nonDefault"})}),"初期値以外の技能のみ"]})]})]}),(0,l.jsxs)("div",{className:"option-group",children:[l.jsx("h3",{children:"ロールコマンド"}),(0,l.jsxs)("div",{className:"radio-group",children:[(0,l.jsxs)("label",{children:[l.jsx("input",{type:"radio",name:"rollCommand",value:"CCB",checked:"CCB"===o.rollCommand,onChange:e=>c({...o,rollCommand:"CCB"})}),"CCB"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"radio",name:"rollCommand",value:"CC",checked:"CC"===o.rollCommand,onChange:e=>c({...o,rollCommand:"CC"})}),"CC"]})]})]}),(0,l.jsxs)("div",{className:"option-group",children:[l.jsx("h3",{children:"キャラクターメモ"}),(0,l.jsxs)("div",{className:"checkbox-group",children:[(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.blank,onChange:e=>{e.target.checked?c({...o,memoOptions:{blank:!0,name:!1,kana:!1,job:!1,sex:!1,age:!1,height:!1,skills:!1,items:!1,features:!1,jobSpecial:!1}}):c({...o,memoOptions:{...o.memoOptions,blank:!1}})}}),"空白"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.name,onChange:e=>c({...o,memoOptions:{...o.memoOptions,name:e.target.checked,blank:!e.target.checked&&o.memoOptions.blank}})}),"名前"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.kana,onChange:e=>c({...o,memoOptions:{...o.memoOptions,kana:e.target.checked,blank:!e.target.checked&&o.memoOptions.blank}})}),"よみがな"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.job,onChange:e=>c({...o,memoOptions:{...o.memoOptions,job:e.target.checked,blank:!e.target.checked&&o.memoOptions.blank}})}),"職業"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.sex,onChange:e=>c({...o,memoOptions:{...o.memoOptions,sex:e.target.checked,blank:!e.target.checked&&o.memoOptions.blank}})}),"性別"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.age,onChange:e=>c({...o,memoOptions:{...o.memoOptions,age:e.target.checked,blank:!e.target.checked&&o.memoOptions.blank}})}),"年齢"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.height,onChange:e=>c({...o,memoOptions:{...o.memoOptions,height:e.target.checked,blank:!e.target.checked&&o.memoOptions.blank}})}),"身長"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.skills,onChange:e=>c({...o,memoOptions:{...o.memoOptions,skills:e.target.checked,blank:!e.target.checked&&o.memoOptions.blank}})}),"所持技能"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.items,onChange:e=>c({...o,memoOptions:{...o.memoOptions,items:e.target.checked,blank:!e.target.checked&&o.memoOptions.blank}})}),"所持品"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.features,onChange:e=>c({...o,memoOptions:{...o.memoOptions,features:e.target.checked,blank:!e.target.checked&&o.memoOptions.blank}})}),"特徴表"]}),(0,l.jsxs)("label",{children:[l.jsx("input",{type:"checkbox",checked:o.memoOptions.jobSpecial,onChange:e=>c({...o,memoOptions:{...o.memoOptions,jobSpecial:e.target.checked,blank:!e.target.checked&&o.memoOptions.blank}})}),"職業特記"]})]})]}),(0,l.jsxs)("div",{className:"memo-preview",children:[l.jsx("h4",{children:"キャラクターメモのプレビュー"}),l.jsx("pre",{children:(()=>{if(o.memoOptions.blank)return"";let e=[],t=[];o.memoOptions.name&&o.memoOptions.kana?t.push(`${s.character_name||"キャラクター"}(${s.character_name_kana||""})`):o.memoOptions.name?t.push(s.character_name||"キャラクター"):o.memoOptions.kana&&t.push(s.character_name_kana||s.character_name||"キャラクター"),t.length>0&&e.push(t.join(""));let a=[];if(o.memoOptions.job&&a.push(s.job||"職業"),o.memoOptions.sex){let e=s.gender_custom||s.sex||s.gender||"性別";a.push(e)}if(o.memoOptions.age&&a.push(s.age||"年齢"),o.memoOptions.height&&a.push(s.height||"身長"),a.length>0&&e.push(a.join(" | ")),e.push(`(PL:${s.player_name||"プレイヤー"})`),o.memoOptions.skills){let t=[],a={dodge:"回避",grapple:"組み付き",throw:"投擲",handgun:"拳銃",submachine_gun:"サブマシンガン",shotgun:"ショットガン",machine_gun:"マシンガン",rifle:"ライフル",martial_arts:"マーシャルアーツ",kick:"キック",punch:"こぶし",headbutt:"頭突き",first_aid:"応急手当",locksmith:"鍵開け",hide:"隠す",sneak:"隠れる",listen:"聞き耳",photography:"写真術",psychoanalysis:"精神分析",track:"追跡",climb:"登攀",library_use:"図書館",spot_hidden:"目星",drive:"運転",mechanical_repair:"機械修理",heavy_machinery:"重機械操作",ride:"乗馬",swim:"水泳",craft:"制作",pilot:"操縦",jump:"跳躍",electrical_repair:"電気修理",navigate:"ナビゲート",disguise:"変装",fast_talk:"言いくるめ",credit_rating:"信用",persuade:"説得",bargain:"値切り",mother_tongue:"母国語",medicine:"医学",occult:"オカルト",chemistry:"化学",cthulhu_mythos:"クトゥルフ神話",art:"芸術",accounting:"経理",archaeology:"考古学",computer_use:"コンピューター",psychology:"心理学",anthropology:"人類学",biology:"生物学",geology:"地質学",electronics:"電子工学",astronomy:"天文学",natural_history:"博物学",physics:"物理学",law:"法律",pharmacy:"薬学",history:"歴史"};Object.entries({dodge:30,grapple:25,throw:25,handgun:20,submachine_gun:15,shotgun:30,machine_gun:15,rifle:25,martial_arts:1,kick:25,punch:50,headbutt:10,first_aid:30,locksmith:1,hide:15,sneak:10,listen:25,photography:10,psychoanalysis:1,track:10,climb:40,library_use:25,spot_hidden:25,drive:20,mechanical_repair:20,heavy_machinery:1,ride:5,swim:25,craft:5,pilot:1,jump:25,electrical_repair:10,navigate:10,disguise:1,fast_talk:5,credit_rating:15,persuade:15,bargain:5,mother_tongue:0,medicine:5,occult:5,chemistry:1,cthulhu_mythos:0,art:5,accounting:10,archaeology:1,computer_use:1,psychology:5,anthropology:1,biology:1,geology:1,electronics:1,astronomy:1,natural_history:10,physics:1,law:5,pharmacy:1,history:20}).forEach(([e,i])=>{let n=s[`${e}_total`]||0;if(n>i){let s=a[e]||e;t.push(`${s}:${n}%`)}}),["combat","exploration","action","negotiation","knowledge"].forEach(e=>{for(let a=1;a<=50;a++){let i=s[`additional_${e}_${a}_name`];if(i){let n=(parseInt(s[`additional_${e}_${a}_initial`])||1)+(parseInt(s[`additional_${e}_${a}_job`])||0)+(parseInt(s[`additional_${e}_${a}_interest`])||0)+(parseInt(s[`additional_${e}_${a}_growth`])||0)+(parseInt(s[`additional_${e}_${a}_other`])||0);n>1&&t.push(`${i}:${n}%`)}}}),t.length>0&&e.push("\n【所持技能】\n"+t.join(" | "))}if(o.memoOptions.items){let t=[];for(let e=1;e<=50;e++){let a=s[`item_${e}_name`],i=s[`item_${e}_count`]||1;a&&t.push(`${a}\xd7${i}`)}t.length>0&&e.push("\n【所持品】\n"+t.join(", "))}if(o.memoOptions.features){let t=[];for(let e=1;e<=10;e++){let a=s[`trait_${e}_name`],i=s[`trait_${e}_description`],n=s[`trait_${e}_number`];if(a&&""!==a.trim()){let e="";e=n?`<${n}:${a}>`:`<${a}>`,i&&""!==i.trim()&&(e+=`
${i}`),t.push(e)}}t.length>0&&e.push("\n【特徴表】\n"+t.join("\n"))}if(o.memoOptions.jobSpecial){let t=s.job_special_notes||s.job_notes||s.job_special||s.occupation_notes||s.special_notes||s.job_memo||s.occupation_special;t&&e.push("\n【職業特記】\n"+t)}return e.join("\n")})()})]})]}),(0,l.jsxs)("div",{className:"modal-buttons",children:[l.jsx("button",{className:"modal-button cancel",onClick:t,children:"閉じる"}),n?(0,l.jsxs)("span",{style:{color:"#4caf50",fontWeight:"bold"},children:[l.jsx("i",{className:"fas fa-check"})," コピーしました"]}):(0,l.jsxs)("button",{className:"modal-button confirm",onClick:()=>{a.e(544).then(a.bind(a,1544)).then(({generateCcfoliaCharacterData:e})=>{let a=JSON.stringify(e(s,i,o));navigator.clipboard.writeText(a).then(()=>{r(!0),setTimeout(()=>{r(!1),t()},2e3)},()=>{let e=document.createElement("textarea");e.value=a,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),r(!0),setTimeout(()=>{r(!1),t()},2e3)})})},children:[l.jsx("i",{className:"fas fa-copy"})," コピー"]})]})]})})]}):null};function P({isOpen:e,onClose:t,onSuccess:a,characterName:s,expectedPassword:i}){let[n,r]=(0,m.useState)(""),[o,c]=(0,m.useState)(""),[d,h]=(0,m.useState)(!1),p=async e=>{if(e.preventDefault(),!n.trim()){c("パスワードを入力してください");return}h(!0),c(""),setTimeout(()=>{h(!1),n===i?(a(),r(""),c("")):c("パスワードが正しくありません")},500)},u=()=>{r(""),c(""),t()};return e?l.jsx("div",{className:"password-modal-overlay",children:(0,l.jsxs)("div",{className:"password-modal",children:[(0,l.jsxs)("div",{className:"password-modal-header",children:[(0,l.jsxs)("h2",{children:[l.jsx("i",{className:"fas fa-lock"}),"パスワード保護されたページ"]}),l.jsx("button",{type:"button",className:"password-modal-close",onClick:u,children:l.jsx("i",{className:"fas fa-times"})})]}),(0,l.jsxs)("div",{className:"password-modal-body",children:[(0,l.jsxs)("p",{className:"password-modal-description",children:[l.jsx("i",{className:"fas fa-info-circle"}),"「",s||"このキャラクター","」の表示にはパスワードが必要です。"]}),(0,l.jsxs)("form",{onSubmit:p,className:"password-modal-form",children:[(0,l.jsxs)("div",{className:"password-input-wrapper",children:[(0,l.jsxs)("label",{htmlFor:"password-input",children:[l.jsx("i",{className:"fas fa-key"}),"パスワード"]}),l.jsx("input",{type:"password",id:"password-input",value:n,onChange:e=>r(e.target.value),placeholder:"パスワードを入力してください",className:"password-modal-input",autoFocus:!0,disabled:d})]}),o&&(0,l.jsxs)("div",{className:"password-modal-error",children:[l.jsx("i",{className:"fas fa-exclamation-triangle"}),o]}),(0,l.jsxs)("div",{className:"password-modal-actions",children:[l.jsx("button",{type:"button",onClick:u,className:"password-modal-cancel",disabled:d,children:"キャンセル"}),l.jsx("button",{type:"submit",className:"password-modal-submit",disabled:d||!n.trim(),children:d?(0,l.jsxs)(l.Fragment,{children:[l.jsx("i",{className:"fas fa-spinner fa-spin"}),"認証中..."]}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("i",{className:"fas fa-unlock"}),"認証"]})})]})]})]})]})}):null}function I({character:e,characterId:t}){let a=(0,p.useRouter)(),{user:s,loading:i}=(0,x.a)(),[n,r]=(0,m.useState)(!1),[o,c]=(0,m.useState)({}),[d,u]=(0,m.useState)({}),[I,R]=(0,m.useState)(null),[B,A]=(0,m.useState)(!1),[D,E]=(0,m.useState)(!1),[F,$]=(0,m.useState)(!1),[z,q]=(0,m.useState)(!1),[Q,U]=(0,m.useState)({hideIntroSecrets:!1,hideCharacterSheet:!1,hideCharacterDetails:!1,hideRecords:!1,hidePasswordProtected:!1}),T=s&&e&&e.userId===s.uid,W=async()=>{let e=new URLSearchParams;Q.hideIntroSecrets&&e.append("hideIntroSecrets","true"),Q.hideCharacterSheet&&e.append("hideSheet","true"),Q.hideCharacterDetails&&e.append("hideDetails","true"),Q.hideRecords&&e.append("hideRecords","true"),Q.hidePasswordProtected&&e.append("hidePassword","true");let t=e.toString()?`${window.location.href}${window.location.href.includes("?")?"&":"?"}${e.toString()}`:window.location.href;try{await navigator.clipboard.writeText(t),q(!1),alert("URLをクリップボードにコピーしました")}catch(a){let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),q(!1),alert("URLをクリップボードにコピーしました")}},[Z,K]=(0,m.useState)({weapons:!1,items:!1,disorders:!1,books:!1,spells:!1,artifacts:!1,entities:!1,memos:!1}),[V,L]=(0,m.useState)(!0),[G,M]=(0,m.useState)(!1),J=(e,t)=>{R((0,b.G)(e,t))},X=e=>{K(t=>({...t,[e]:!t[e]}))},[Y,H]=(0,m.useState)(!1),[ee,et]=(0,m.useState)(!1),[ea,es]=(0,m.useState)(!1),[ei,en]=(0,m.useState)(!1),[er,eo]=(0,m.useState)(!1);if(!e)return(0,l.jsxs)("div",{children:[l.jsx(h(),{children:l.jsx("title",{children:"キャラクターが見つかりません"})}),l.jsx("h1",{children:"キャラクターが見つかりません"}),(0,l.jsxs)("p",{children:["指定されたキャラクター（ID: ",t,"）は存在しません。"]})]});let ec=`${e.character_name||"キャラクター"} - CoC6版キャラクターシート`,el=()=>{A(!0)};return e?.page_password_enabled&&e?.page_password&&!F?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h(),{children:[l.jsx("title",{children:ec}),l.jsx("meta",{name:"description",content:`${e.character_name}のキャラクターシート`}),l.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),l.jsx(_.Z,{showBackButton:!0,customBackUrl:"/"}),l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh",textAlign:"center",padding:"20px"},children:(0,l.jsxs)("div",{children:[l.jsx("i",{className:"fas fa-lock",style:{fontSize:"3rem",color:"#ccc",marginBottom:"20px"}}),l.jsx("h2",{style:{color:"#666",marginBottom:"10px"},children:"パスワード保護されたページ"}),l.jsx("p",{style:{color:"#888"},children:"このページを表示するには認証が必要です。"})]})}),l.jsx(P,{isOpen:D,onClose:()=>{E(!1),a.push("/list")},onSuccess:()=>{let e=`auth-${t}`;sessionStorage.setItem(e,"true"),$(!0),E(!1)},characterName:e.character_name,expectedPassword:e.page_password})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h(),{children:[l.jsx("title",{children:ec}),l.jsx("meta",{name:"description",content:`${e.character_name}のキャラクターシート`}),l.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),l.jsx(_.Z,{showBackButton:!0,customBackUrl:"/list",showEditButton:T,editUrl:`/create?edit=${t}`,showShareButton:!0,onShare:()=>{q(!0)}}),l.jsx(O,{onCcfoliaExport:el}),l.jsx("div",{className:"works-template-default single single-works postid-6531 custom-background",children:l.jsx("div",{id:"content",className:`chara-coc character page-with-header ${e?.is_lost?"is-lost":""}`,children:l.jsx("div",{id:"inner-content",className:"wrap cf",children:l.jsx("main",{id:"main",role:"main",itemScope:!0,itemProp:"mainContentOfPage",itemType:"http://schema.org/Blog",children:(0,l.jsxs)("article",{id:"post-6531",className:"cf post-6531 works type-works status-publish has-post-thumbnail hentry custom_cat-character custom_cat-chara-coc custom_tag-1072",role:"article",children:[l.jsx(w.Z,{character:e,hideSecrets:Y}),!ee&&l.jsx("section",{className:"chara-seet character-display",children:(0,l.jsxs)("div",{className:"data-wrap",style:{margin:"10px 0"},children:[(0,l.jsxs)("div",{className:`playsheet-header ${G?"":"active"}`,onClick:()=>M(!G),children:[(0,l.jsxs)("h2",{children:[l.jsx("i",{className:"fas fa-scroll section-icon"})," Character Sheet"]}),l.jsx("i",{className:`fas ${G?"fa-chevron-right":"fa-chevron-down"}`,style:{marginRight:"5px"}})]}),!G&&(0,l.jsxs)("div",{className:"equipment-content",children:[l.jsx(f.Z,{character:e,calculateAbilityTotal:()=>["str_total","con_total","pow_total","dex_total","app_total","siz_total","int_total","edu_total"].reduce((t,a)=>{let s=e[a];return t+(s&&!isNaN(s)?parseInt(s):0)},0)}),(0,l.jsxs)("div",{className:"character-info character-name-section",children:[l.jsx(k.Z,{character:e}),l.jsx(S.Z,{character:e,characterId:t,handleSkillClick:J,onCcfoliaExport:el}),l.jsx(j.Z,{character:e,equipmentSections:Z,toggleEquipmentSection:X,handleSkillClick:J}),l.jsx(y.Z,{character:e,equipmentSections:Z,toggleEquipmentSection:X,secretMemoVisibility:o,memoPasswordStates:d,toggleSecretMemoVisibility:e=>{c(t=>({...t,[e]:!t[e]}))},handlePasswordInput:(e,t)=>{u(a=>({...a,[e]:{...a[e],inputPassword:t}}))},handlePasswordSubmit:t=>{let a=e[`${t}_password`];(d[t]?.inputPassword||"")===a?u(e=>({...e,[t]:{...e[t],unlocked:!0}})):alert("パスワードが正しくありません")},hideSecrets:Y||er})]})]})]})}),!ea&&l.jsx(C.Z,{characterData:e,hideSecrets:Y||er}),!ei&&l.jsx(C.x,{characterData:e,hideSecrets:Y||er})]})})})})}),l.jsx(g.Z,{result:I,onClose:()=>R(null)}),l.jsx(N,{isOpen:B,onClose:()=>A(!1),character:e,characterId:t}),z&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,l.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[(0,l.jsxs)("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",color:"#333",textAlign:"center"},children:[l.jsx("i",{className:"fas fa-share-alt",style:{marginRight:"8px"}}),"キャラクターシートを共有"]}),l.jsx("p",{style:{margin:"0 0 16px 0",fontSize:"14px",color:"#666",textAlign:"center"},children:"URLをコピーして共有できます"}),(0,l.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#f0f0f0",borderRadius:"4px"},children:[l.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"非表示にする項目を選択："}),(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"8px",fontSize:"14px",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:Q.hideIntroSecrets,onChange:e=>U(t=>({...t,hideIntroSecrets:e.target.checked})),style:{marginRight:"8px"}}),"キャラクター紹介 - 秘匿情報"]}),(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"8px",fontSize:"14px",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:Q.hideCharacterSheet,onChange:e=>U(t=>({...t,hideCharacterSheet:e.target.checked})),style:{marginRight:"8px"}}),"キャラクターシート"]}),(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"8px",fontSize:"14px",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:Q.hideCharacterDetails,onChange:e=>U(t=>({...t,hideCharacterDetails:e.target.checked})),style:{marginRight:"8px"}}),"キャラクター詳細"]}),(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"8px",fontSize:"14px",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:Q.hideRecords,onChange:e=>U(t=>({...t,hideRecords:e.target.checked})),style:{marginRight:"8px"}}),"記録"]}),(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",fontSize:"14px",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:Q.hidePasswordProtected,onChange:e=>U(t=>({...t,hidePasswordProtected:e.target.checked})),style:{marginRight:"8px"}}),"パスワード付きの情報"]})]}),l.jsx("div",{style:{border:"1px solid #ddd",borderRadius:"4px",padding:"8px 12px",backgroundColor:"#f9f9f9",fontSize:"14px",wordBreak:"break-all",marginBottom:"16px"},children:(()=>{let e=new URLSearchParams;return Q.hideIntroSecrets&&e.append("hideIntroSecrets","true"),Q.hideCharacterSheet&&e.append("hideSheet","true"),Q.hideCharacterDetails&&e.append("hideDetails","true"),Q.hideRecords&&e.append("hideRecords","true"),Q.hidePasswordProtected&&e.append("hidePassword","true"),e.toString()?`${window.location.href}${window.location.href.includes("?")?"&":"?"}${e.toString()}`:window.location.href})()}),(0,l.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:()=>q(!1),style:{flex:1,padding:"10px",backgroundColor:"#f0f0f0",color:"#666",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"閉じる"}),(0,l.jsxs)("button",{onClick:W,style:{flex:1,padding:"10px",backgroundColor:e?.ui_theme_color||"#74cdc3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:[l.jsx("i",{className:"fas fa-copy",style:{marginRight:"6px"}}),"URLをコピー"]})]})]})}),l.jsx(v.Z,{})]})}let R=async()=>{try{return{paths:await (0,u._m)(),fallback:"blocking"}}catch(e){return console.error("getStaticPaths error:",e),{paths:[],fallback:"blocking"}}},B=async({params:e})=>{if(!e?.id||"string"!=typeof e.id)return{notFound:!0};try{let t=await (0,u.nd)(e.id);if(!t)return{notFound:!0};return{props:{character:t,characterId:e.id}}}catch(e){return console.error("getStaticProps error:",e),{notFound:!0}}},A=(0,r.l)(s,"default"),D=(0,r.l)(s,"getStaticProps"),E=(0,r.l)(s,"getStaticPaths"),F=(0,r.l)(s,"getServerSideProps"),$=(0,r.l)(s,"config"),z=(0,r.l)(s,"reportWebVitals"),q=(0,r.l)(s,"unstable_getStaticProps"),Q=(0,r.l)(s,"unstable_getStaticPaths"),U=(0,r.l)(s,"unstable_getStaticParams"),T=(0,r.l)(s,"unstable_getServerProps"),W=(0,r.l)(s,"unstable_getServerSideProps"),Z=new i.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/character/[id]",pathname:"/character/[id]",bundlePath:"",filename:""},components:{App:c.default,Document:o.default},userland:s})},2149:(e,t,a)=>{a.d(t,{pm:()=>l,_m:()=>c,nd:()=>o});let s=require("firebase-admin/app"),i=require("firebase-admin/firestore"),n=null,r=!1;async function o(e){try{if(!r||!n)return console.warn("Firebase Admin not initialized, cannot fetch character data"),null;let t=await n.collection("characters").doc(e).get();if(!t.exists)return null;let a=t.data(),s=JSON.parse(JSON.stringify(a,(e,t)=>t&&"object"==typeof t&&t._seconds?new Date(1e3*t._seconds).toISOString():t));return{id:t.id,...s}}catch(e){return console.error("Character data fetch error:",e),null}}async function c(){try{if(!r||!n)return console.warn("Firebase Admin not initialized, cannot fetch character IDs"),[];return(await n.collection("characters").get()).docs.map(e=>({params:{id:e.id}}))}catch(e){return console.error("Character IDs fetch error:",e),[]}}async function l(){try{if(!r||!n)return console.warn("Firebase Admin not initialized, cannot fetch character data"),[];return(await n.collection("characters").get()).docs.map(e=>{let t=e.data(),a=JSON.parse(JSON.stringify(t,(e,t)=>t&&"object"==typeof t&&t._seconds?new Date(1e3*t._seconds).toISOString():t));return{id:e.id,...a}})}catch(e){return console.error("All character data fetch error:",e),[]}}!function(){try{if(!(0,s.getApps)().length){let e="-----BEGIN PRIVATE KEY-----\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDW4B7UQap7LamG\nSHRODkRUvpfFki/WyfufzTeaWePVhoPFpBKvyV/oHu4l6GDinbGfsIIcLAw09c0A\njsC/Zd/MJikwZz1zDdH6fs+ax2xpz2mA3biwxKx79l7d9k4fLLW5kfrjI1J/auFU\nPQYcvmwGLk/iAayRaJfesphyMauRGn2QC9yHpiVaxFVHW6mq6Wed1RdFYGmZvyoa\nkx5M/YOVIMwfulx+8z4ApIzisPK4RtjtjQR6M8Ntwl+hyyvruKUZb+jPnkCozKGV\ndfSPTjMpJfA8oZdRhKbiIDpS+aiWVKjEmCBgSdEwV06VFsFyKmpU7kDvZFpGoMEF\nvixYPCBZAgMBAAECggEAAUR3czrH7cvKTHwwWks6rasA/i2iSOQOZehWjQ2rQYN2\nd4TWPRhZj53PFvK5YdzRZ7AE2QZDxnQybjj7oFxAC7GoN2W7W1hhPPuXpnik8+v3\n2esHLUqbsdnHm8Jr4vl5ZYKJf3TrT17Pc7t3RgyzyCIfg6V64a1DaBEpnsCIQIqQ\naEd22UAQkwg8TIufKfy705BUDXV/3gVQ/n5CcGyahXTF86peNMCHxKCaQ19YhybW\neTHFJErybqhta0roYOSxfeGWIZipxFaEO4LG0RGo4hbPLDyEu0J/X1uRCmtUvJKh\n++GP9xkvFD0IzAXXrrV9bUcvJXvFNtPtb8PgvEpL4QKBgQDva2X8hnP/OEu0Ti5i\n2mMcbw5UG3aaqhFeq3fuYAY+X7M31kil1pv02UzTbvbi3E7lhWZRp4cQg+TDRyBX\no2WT3PNj7OtgU5giDLz9UCZ5CUMuhQoRn4w9dfMsCKxlwZlA6VWjUQtKmAIOBUTv\nmFe0aVESldPd3iuLL0/KJ635BQKBgQDlwZZerhiIXVi3iinfw+pRzBiQySVJrBqs\nuBFMa/3ViSWxg1HSfIY+W+L104lP3GN7DGmlKIRLrYGapcGQHBi5oWCydWCdEXg8\nWMCBqSzeDSslHceyftOqOlwYI3T8gkasY2mRPuu5TqfRjYEIi6j+or4C9Q4JilO8\nAFJtbk+aRQKBgQCkutx9F3WQUQelk3VPBrvSwIa3T/4XBJTW8lueY+tn1yjUblel\n4zeDDFBT2bF8/eA7A8IWxJGlx1oLElEqe35Ucl30jvqUWHAAXYtbL16JQNo8k8UN\nwx0W3KTn0z/q832ir+kAaa6/MD+Zrf50a/lMZHons3cG3OpQ5cicaxjEkQKBgQCS\nPR/q78EputCnMkfo55iTq+bO8VjMhcEMwrQwAmS0r/DQBhfkc+I2euIBOj2iGVMw\nlPwBZcKfMLbXqj2D7n5GWVNlA5UVJHN1ZcBSR04JoDQgEc5z7InpRfAsZRUnS/yT\n6UreakA72La0iO7ic5KDUS7ETxo6NFOLzGCqypXcSQKBgQDIj34Fw9Mp5glx/uIb\nIr+TUO2GgBSaFUR2pN7SzN73ivWnb7tcXth7wAOoy61Pq6LRdqFFKowtqCuN8uCg\n+L8DwCz5ofLJu8uCEL/cmec57T8A/dS744hVxRXRgzsa2ury9s2JapHopjSdJr83\nkwbUswcywPgXXh3BfbNtnVsoRw==\n-----END PRIVATE KEY-----\n".replace(/\\n/g,"\n");if(!e)return console.warn("Firebase Admin environment variables are missing - running in offline mode"),!1;(0,s.initializeApp)({credential:(0,s.cert)({projectId:"hatake-ffb62",clientEmail:"firebase-adminsdk-fbsvc@hatake-ffb62.iam.gserviceaccount.com",privateKey:e}),projectId:"hatake-ffb62"}),console.log("Firebase Admin initialized successfully")}n=(0,i.getFirestore)(),r=!0}catch(e){return console.error("Firebase Admin initialization error:",e),r=!1,!1}}()},4324:e=>{e.exports=require("firebase/app")},4610:e=>{e.exports=require("firebase/auth")},6058:e=>{e.exports=require("firebase/firestore")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9816:e=>{e.exports=require("styled-jsx/style")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[859,342,664,280,248],()=>a(4011));module.exports=s})();