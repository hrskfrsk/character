(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{163:function(e,a,b){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return b(9042)}])},9042:function(e,a,b){"use strict";b.r(a),b.d(a,{default:function(){return h}});var s=b(5893),r=b(645),t=b.n(r),o=b(7294),c=b(1163),i=b(9008),n=b.n(i),l=b(1664),x=b.n(l),d=b(5770),p=b(6875),m=b(2210);function h(){let e=(0,c.useRouter)(),{user:a,loading:b,signInWithEmail:r,signInWithGoogle:i}=(0,d.a)(),[l,h]=(0,o.useState)(""),[u,g]=(0,o.useState)(""),[j,f]=(0,o.useState)(""),[w,k]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!b&&a){let a=e.query.redirect||"/";e.push(a)}},[a,b,e]);let y=async a=>{a.preventDefault(),f(""),k(!0);try{await r(l,u);let a=e.query.redirect||"/";e.push(a)}catch(e){"auth/user-not-found"===e.code?f("ユーザーが見つかりません"):"auth/wrong-password"===e.code?f("パスワードが間違っています"):"auth/invalid-email"===e.code?f("メールアドレスの形式が正しくありません"):f("ログインに失敗しました")}finally{k(!1)}},v=async()=>{f(""),k(!0);try{await i();let a=e.query.redirect||"/";e.push(a)}catch(e){"auth/popup-closed-by-user"===e.code?f("ログインがキャンセルされました"):f("Googleログインに失敗しました")}finally{k(!1)}};return b?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n(),{children:(0,s.jsx)("title",{className:"jsx-b5bcbc09471b7081",children:"ログイン - クトゥルフ神話TRPG第6版 キャラクターシート"})}),(0,s.jsx)(p.Z,{showCreateButton:!1}),(0,s.jsx)("main",{className:"jsx-b5bcbc09471b7081 container page-with-header auth-page",children:(0,s.jsxs)("div",{className:"jsx-b5bcbc09471b7081 auth-container",children:[(0,s.jsx)("h1",{className:"jsx-b5bcbc09471b7081",children:"ログイン"}),j&&(0,s.jsxs)("div",{className:"jsx-b5bcbc09471b7081 error-message",children:[(0,s.jsx)("i",{className:"jsx-b5bcbc09471b7081 fas fa-exclamation-circle"}),j]}),(0,s.jsxs)("form",{onSubmit:y,className:"jsx-b5bcbc09471b7081 auth-form",children:[(0,s.jsxs)("div",{className:"jsx-b5bcbc09471b7081 form-group",children:[(0,s.jsx)("label",{htmlFor:"email",className:"jsx-b5bcbc09471b7081",children:"メールアドレス"}),(0,s.jsx)("input",{id:"email",type:"email",value:l,onChange:e=>h(e.target.value),required:!0,placeholder:"example@email.com",className:"jsx-b5bcbc09471b7081 form-input"})]}),(0,s.jsxs)("div",{className:"jsx-b5bcbc09471b7081 form-group",children:[(0,s.jsx)("label",{htmlFor:"password",className:"jsx-b5bcbc09471b7081",children:"パスワード"}),(0,s.jsx)("input",{id:"password",type:"password",value:u,onChange:e=>g(e.target.value),required:!0,placeholder:"パスワードを入力",className:"jsx-b5bcbc09471b7081 form-input"})]}),(0,s.jsx)("div",{className:"jsx-b5bcbc09471b7081 form-actions",children:(0,s.jsx)("button",{type:"submit",disabled:w,className:"jsx-b5bcbc09471b7081 btn btn-primary",children:w?"ログイン中...":"ログイン"})})]}),(0,s.jsx)("div",{className:"jsx-b5bcbc09471b7081 auth-divider",children:(0,s.jsx)("span",{className:"jsx-b5bcbc09471b7081",children:"または"})}),(0,s.jsxs)("button",{onClick:v,disabled:w,className:"jsx-b5bcbc09471b7081 btn btn-google",children:[(0,s.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"jsx-b5bcbc09471b7081",children:[(0,s.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",className:"jsx-b5bcbc09471b7081"}),(0,s.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",className:"jsx-b5bcbc09471b7081"}),(0,s.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",className:"jsx-b5bcbc09471b7081"}),(0,s.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",className:"jsx-b5bcbc09471b7081"})]}),"Googleでログイン"]}),(0,s.jsxs)("div",{className:"jsx-b5bcbc09471b7081 auth-links",children:[(0,s.jsx)(x(),{href:"/auth/signup",children:"アカウントをお持ちでない方はこちら"}),(0,s.jsx)(x(),{href:"/auth/reset-password",children:"パスワードを忘れた方はこちら"})]})]})}),(0,s.jsx)(m.Z,{}),(0,s.jsx)(t(),{id:"b5bcbc09471b7081",children:'.auth-page.jsx-b5bcbc09471b7081{background:-webkit-linear-gradient(top,#74cdc3 35%,transparent);background:-moz-linear-gradient(top,#74cdc3 35%,transparent);background:-o-linear-gradient(top,#74cdc3 35%,transparent);background:linear-gradient(180deg,#74cdc3 35%,transparent);min-height:90vh;padding-top:3%}.auth-container.jsx-b5bcbc09471b7081{max-width:400px;margin:40px auto;padding:30px;background:white;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 10px rgba(0,0,0,.1);-moz-box-shadow:0 2px 10px rgba(0,0,0,.1);box-shadow:0 2px 10px rgba(0,0,0,.1)}h1.jsx-b5bcbc09471b7081{text-align:center;margin-bottom:30px;color:#333;font-size:24px}.error-message.jsx-b5bcbc09471b7081{background:#fee;color:#c33;padding:12px 16px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;margin-bottom:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;font-size:14px}.auth-form.jsx-b5bcbc09471b7081{margin-bottom:20px}.form-group.jsx-b5bcbc09471b7081{margin-bottom:20px}.form-group.jsx-b5bcbc09471b7081 label.jsx-b5bcbc09471b7081{display:block;margin-bottom:6px;color:#495057;font-size:14px;font-weight:500}.form-input.jsx-b5bcbc09471b7081{width:100%;padding:10px 12px;border:1px solid#ddd;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:14px;-webkit-transition:border-color.3s ease;-moz-transition:border-color.3s ease;-o-transition:border-color.3s ease;transition:border-color.3s ease}.form-input.jsx-b5bcbc09471b7081:focus{outline:none;border-color:var(--ui-theme-color);-webkit-box-shadow:0 0 0 2px var(--ui-theme-color-light);-moz-box-shadow:0 0 0 2px var(--ui-theme-color-light);box-shadow:0 0 0 2px var(--ui-theme-color-light)}.form-actions.jsx-b5bcbc09471b7081{margin-top:24px}.btn.jsx-b5bcbc09471b7081{width:100%;padding:12px 20px;border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:8px}.btn.jsx-b5bcbc09471b7081:disabled{opacity:.6;cursor:not-allowed}.btn-primary.jsx-b5bcbc09471b7081{background:var(--ui-theme-color);color:white}.btn-primary.jsx-b5bcbc09471b7081:hover:not(:disabled){background:var(--ui-theme-color-hover);-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px);-webkit-box-shadow:0 4px 12px rgba(0,0,0,.15);-moz-box-shadow:0 4px 12px rgba(0,0,0,.15);box-shadow:0 4px 12px rgba(0,0,0,.15)}.btn-google.jsx-b5bcbc09471b7081{background:white;color:#333;border:1px solid#ddd}.btn-google.jsx-b5bcbc09471b7081:hover:not(:disabled){background:#f8f9fa;border-color:#ccc;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px);-webkit-box-shadow:0 2px 8px rgba(0,0,0,.1);-moz-box-shadow:0 2px 8px rgba(0,0,0,.1);box-shadow:0 2px 8px rgba(0,0,0,.1)}.auth-divider.jsx-b5bcbc09471b7081{text-align:center;margin:24px 0;position:relative}.auth-divider.jsx-b5bcbc09471b7081 span.jsx-b5bcbc09471b7081{background:white;padding:0 16px;color:#6c757d;font-size:14px;position:relative}.auth-divider.jsx-b5bcbc09471b7081::before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e9ecef;z-index:-1}.auth-links.jsx-b5bcbc09471b7081{margin-top:24px;text-align:center}@media(max-width:768px){.auth-container.jsx-b5bcbc09471b7081{margin:20px;padding:24px}h1.jsx-b5bcbc09471b7081{font-size:20px}}'})]})}}},function(e){e.O(0,[930,534,888,774,179],function(){return e(e.s=163)}),_N_E=e.O()}]);